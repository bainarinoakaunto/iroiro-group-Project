<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ‡ã‚¸ã‚¹ã‚¿|ã„ã‚ã„ã‚Group</title>
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
body{
  font-family:"Comic Sans MS",sans-serif;
  text-align:center;
  padding:20px;
  background:#fdf2e9;
}
#reader{
  width:300px;margin:20px auto;
  border:3px dashed #c59f7b;border-radius:12px;
  padding:10px;background:#fff8f0;
}
.stamp-area{
  display:flex;flex-wrap:wrap;justify-content:center;
  gap:15px;margin-top:20px;
}
.stamp{
  border:2px dashed #c59f7b;padding:5px;width:130px;
  border-radius:10px;background:#fff8f0;
  box-shadow:2px 2px 8px rgba(0,0,0,0.2);
}
.stamp img{width:100%;border-radius:8px;}
.stamp-number{font-size:14px;font-weight:bold;color:#b3561c;}
.stamp-date{font-size:12px;color:#8b5a2b;}
button{
  margin-top:6px;padding:6px 10px;
  font-size:14px;border-radius:6px;
  border:1px solid #c59f7b;
  background:#fff2e0;cursor:pointer;
}
button:hover{background:#ffd8b0;}
#stampCount{font-weight:bold;margin-top:10px;color:#b3561c;}
#jankenArea{
  margin-top:40px;padding:20px;
  border:3px dashed #c59f7b;
  border-radius:15px;background:#fff8f0;
}
#roulette{font-size:70px;height:90px;margin-bottom:10px;}
#jankenResult{font-size:18px;font-weight:bold;color:#b3561c;}
#adminStatus{color:#c0392b;font-weight:bold;margin-top:10px;}
</style>
</head>

<body>
  <nav>
  <ul>
    <li><a href="#home">Home</a></li>
    <li><a href="#news">News</a></li>
    <li><a href="#services">Services</a></li>
    <li><a href="#company">Company</a></li>
    <li><a href="#link">Link</a></li>
    <li><a href="#Video">Merchandise</a></li>
    <li><a href="#status">Service Information</a></li>
    <li><a href="#contact">Contact</a></li>
    <li><a href="irotemu.html">ã„ã‚ãƒ†ãƒƒã‚¯</a></li>    
    <li><a href="ã„ã‚ã„ã‚é€šä¿¡.html">ã„ã‚ã„ã‚é€šä¿¡</a></li>    
    <li><a href="æƒ…å ±æ²è¼‰è¨¼æ˜æ›¸.html">æƒ…å ±æ²è¼‰è¨¼æ˜æ›¸</a></li> 
  </ul>
</nav>

<h1>ãƒ‡ã‚¸ã‚¹ã‚¿</h1>

<button onclick="enterAdmin()">ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰</button>
<div id="adminStatus"></div>

<div id="reader"></div>
<button onclick="restartScan()">å†èª­ã¿å–ã‚Š</button>

<p id="stampCount">åˆè¨ˆã‚¹ã‚¿ãƒ³ãƒ—æ•°: 0</p>
<div id="stampArea" class="stamp-area"></div>

<h2>ã˜ã‚ƒã‚“ã‘ã‚“ï¼ˆ1æ—¥1å›ï¼‰</h2>
<div id="jankenArea">
  <div id="roulette">â“</div>
  <div>
    <button onclick="startJanken('rock')">âœŠ</button>
    <button onclick="startJanken('scissors')">âœŒï¸</button>
    <button onclick="startJanken('paper')">âœ‹</button>
  </div>
  <p id="jankenResult"></p>
</div>

<script>
/* ===== ç®¡ç†è€…è¨­å®š ===== */
const ADMIN_PASSWORD = "1430";
let isAdmin = false;

function enterAdmin(){
  if(prompt("ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰") === ADMIN_PASSWORD){
    isAdmin = true;
    document.getElementById("adminStatus").textContent = "ğŸ‘‘ ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ä¸­";
    alert("ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã—ãŸ");
  }else{
    alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
  }
}

/* ===== QRã‚³ãƒ¼ãƒ‰å¯¾å¿œ ===== */
const QR_VALUE_INFO_MAP = {
  "https://codepen.io/bainarinoakaunto/pen/emZaZLr":{
    img:"https://cdn2.scratch.mit.edu/get_image/project/1264832201_100x80.png",
    number:"001"
  },
  "https://bc.benesse.ne.jp/nzm/redirect?code=FsUPBNRukK":{
    img:"https://cdn2.scratch.mit.edu/get_image/project/1264832201_100x80.png",
    number:"002"
  },
  "https://maps.app.goo.gl/Fp1J9vefnib7n3AaA":{
    img:"https://cdn2.scratch.mit.edu/get_image/project/1261979082_100x80.png",
    number:"003"
  }
};

const USE_PASSWORD="0430";
const JANKEN_STAMP={
  img:"https://cdn2.scratch.mit.edu/get_image/project/1264832201_100x80.png",
  number:"ã˜ã‚ƒã‚“ã‘ã‚“"
};

let stamps=JSON.parse(localStorage.getItem("stamps")||"[]");
let scanning=true;
let scanner;

/* ===== æ—¥ä»˜ ===== */
function today(){
  const d=new Date();
  return `${d.getFullYear()}/${String(d.getMonth()+1).padStart(2,"0")}/${String(d.getDate()).padStart(2,"0")}`;
}
function todayKey(){
  return new Date().toISOString().slice(0,10);
}

/* ===== è¡¨ç¤º ===== */
function render(){
  const area=document.getElementById("stampArea");
  area.innerHTML="";
  document.getElementById("stampCount").textContent =
    "åˆè¨ˆã‚¹ã‚¿ãƒ³ãƒ—æ•°: "+stamps.filter(s=>!s.used).length;

  stamps.forEach((s,i)=>{
    if(s.used) return;
    area.insertAdjacentHTML("beforeend",`
      <div class="stamp">
        <img src="${s.img}">
        <div class="stamp-number">æ‹…å½“è€…No.${s.number}</div>
        <div class="stamp-date">å–å¾—æ—¥ï¼š${s.date}</div>
        <button onclick="useStamp(${i})">ä½¿ç”¨</button>
      </div>
    `);
  });
}

/* ===== QRèª­ã¿å–ã‚Š ===== */
function onScanSuccess(text){
  if(!scanning) return;
  const info=QR_VALUE_INFO_MAP[text];
  if(!info){alert("ã‚³ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");return;}

  stamps.push({img:info.img,number:info.number,date:today(),used:false});
  localStorage.setItem("stamps",JSON.stringify(stamps));
  render();
  scanning=false;
  scanner.clear();
}

function restartScan(){
  if(scanning) return;
  scanning=true;
  scanner.render(onScanSuccess);
}

/* ===== ã‚¹ã‚¿ãƒ³ãƒ—ä½¿ç”¨ ===== */
function useStamp(i){
  if(prompt("ä½¿ç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰")===USE_PASSWORD){
    stamps[i].used=true;
    localStorage.setItem("stamps",JSON.stringify(stamps));
    render();
  }else alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
}

/* ===== ã˜ã‚ƒã‚“ã‘ã‚“ ===== */
const JANKEN_HANDS=[
  {key:"rock",emoji:"âœŠ"},
  {key:"scissors",emoji:"âœŒï¸"},
  {key:"paper",emoji:"âœ‹"}
];

function startJanken(player){

  if(!isAdmin && localStorage.getItem("jankenDate")===todayKey()){
    alert("ä»Šæ—¥ã¯ã‚‚ã†ã˜ã‚ƒã‚“ã‘ã‚“ã§ãã¾ã›ã‚“");
    return;
  }

  let i=0;
  const timer=setInterval(()=>{
    document.getElementById("roulette").textContent=
      JANKEN_HANDS[i++%3].emoji;
  },100);

  setTimeout(()=>{
    clearInterval(timer);
    const cpu=JANKEN_HANDS[Math.floor(Math.random()*3)];
    document.getElementById("roulette").textContent=cpu.emoji;

    const r=judge(player,cpu.key);
    document.getElementById("jankenResult").textContent="çµæœï¼š"+r;

    if(r!=="ã‚ã„ã“" && !isAdmin){
      localStorage.setItem("jankenDate",todayKey());
    }

    if(r==="å‹ã¡ ğŸ‰"){
      stamps.push({
        img:JANKEN_STAMP.img,
        number:JANKEN_STAMP.number,
        date:today(),
        used:false
      });
      localStorage.setItem("stamps",JSON.stringify(stamps));
      render();
      alert("å‹ã¡ï¼ã‚¹ã‚¿ãƒ³ãƒ—ã‚’1å€‹ã‚²ãƒƒãƒˆï¼");
    }
  },2000);
}

function judge(p,c){
  if(p===c) return "ã‚ã„ã“";
  if(
    (p==="rock"&&c==="scissors")||
    (p==="scissors"&&c==="paper")||
    (p==="paper"&&c==="rock")
  ) return "å‹ã¡ ğŸ‰";
  return "è² ã‘ ğŸ˜¢";
}

/* ===== ã‚«ãƒ¡ãƒ©èµ·å‹• ===== */
scanner=new Html5QrcodeScanner("reader",{fps:8,qrbox:250},false);
scanner.render(onScanSuccess);
render();
</script>
</body>
</html>
<footer>
  
<footer>
  <p>2026 ã„ã‚ã„ã‚ Group.<br>ã“ã®ã‚µã‚¤ãƒˆã¯å®Ÿåœ¨ã™ã‚‹ä¼æ¥­ãƒ»å›£ä½“ã¨ã¯ç„¡é–¢ä¿‚ã§ã™ã€‚</p>

  <div class="footer-links">
    <a href="irotemu.html">æ–°ä¼šç¤¾</a> |
    <a href="ã„ã‚ã„ã‚é€šä¿¡.html">ã„ã‚ã„ã‚é€šä¿¡</a> |
    <a href="æƒ…å ±æ²è¼‰è¨¼æ˜æ›¸.html">æ²è¼‰è¨¼æ˜</a> |
    <a href="ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¹ã‚¿ãƒ³ãƒ—ã‚«ãƒ¼ãƒ‰.html">ãƒ‡ã‚¸ã‚¹ã‚¿k</a> |
    <a href="ã„ã‚ã„ã‚ä¼šç¤¾ã‚µãƒ¼ãƒ“ã‚¹.html">é€šè²¨ç®¡ç†</a>
  </div>
</footer>

