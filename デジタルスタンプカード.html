<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ‡ã‚¸ã‚¹ã‚¿ | ã„ã‚ã„ã‚Group</title>

<script src="https://unpkg.com/html5-qrcode"></script>
<link rel="icon" type="image/png" href="ã„ã‚ã„ã‚.png">

<style>
body{
  margin:0;
  font-family:"Comic Sans MS", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  text-align:center;
  padding-top:100px;
  background:#fdf2e9;
}

nav{
  position:fixed;
  top:0;
  width:100%;
  background:#fff;
  border-bottom:1px solid #ddd;
}

nav ul{
  display:flex;
  justify-content:center;
  list-style:none;
  padding:16px;
  gap:20px;
  margin:0;
  flex-wrap:wrap;
}

#reader{
  width:300px;
  margin:20px auto;
  border:3px dashed #c59f7b;
  border-radius:12px;
  padding:10px;
  background:#fff8f0;
}

.stamp-area{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:15px;
}

.stamp{
  width:130px;
  padding:6px;
  border-radius:10px;
  border:2px dashed #c59f7b;
  background:#fff8f0;
}

.stamp img{width:100%;border-radius:8px;}

button{
  padding:6px 10px;
  border-radius:6px;
  border:1px solid #c59f7b;
  background:#fff2e0;
  cursor:pointer;
}

#jankenArea{
  margin:40px auto;
  padding:20px;
  max-width:400px;
  border:3px dashed #c59f7b;
  border-radius:15px;
  background:#fff8f0;
}

#roulette{font-size:70px;height:90px;}
#adminStatus{color:#c0392b;font-weight:bold;}

footer{
  margin-top:60px;
  padding:40px;
  background:#fff;
}
</style>
</head>

<body>

<nav>
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="irotemu.html">ã„ã‚ãƒ†ãƒƒã‚¯</a></li>
    <li><a href="ã„ã‚ã„ã‚é€šä¿¡.html">ã„ã‚ã„ã‚é€šä¿¡</a></li>
  </ul>
</nav>

<h1>ãƒ‡ã‚¸ã‚¹ã‚¿</h1>

<button onclick="enterAdmin()">ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰</button>
<div id="adminStatus"></div>

<div id="reader"></div>
<button onclick="restartScan()">å†èª­ã¿å–ã‚Š</button>

<p id="stampCount">åˆè¨ˆã‚¹ã‚¿ãƒ³ãƒ—æ•°: 0</p>
<div id="stampArea" class="stamp-area"></div>

<h2>ã˜ã‚ƒã‚“ã‘ã‚“ï¼ˆ1æ—¥1å›ï¼‰</h2>
<div id="jankenArea">
  <div id="roulette">â“</div>
  <button onclick="startJanken('rock')">âœŠ</button>
  <button onclick="startJanken('scissors')">âœŒï¸</button>
  <button onclick="startJanken('paper')">âœ‹</button>
  <p id="jankenResult"></p>
</div>

<footer>
  <p>2026 ã„ã‚ã„ã‚ Group<br>ã“ã®ã‚µã‚¤ãƒˆã¯å®Ÿåœ¨ã®å›£ä½“ã¨ã¯ç„¡é–¢ä¿‚ã§ã™</p>
</footer>

<script>
/* ===== ç®¡ç†è€… ===== */
const ADMIN_PASSWORD="1430";
let isAdmin=false;

function enterAdmin(){
  if(prompt("ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰")==ADMIN_PASSWORD){
    isAdmin=true;
    document.getElementById("adminStatus").textContent="ğŸ‘‘ ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰";
  }
}

/* ===== QRå¯¾å¿œè¡¨ ===== */
const QR_VALUE_INFO_MAP = {
  "https://codepen.io/bainarinoakaunto/pen/emZaZLr":{
    img:"https://cdn2.scratch.mit.edu/get_image/project/1264832201_100x80.png",
    number:"001"
  },
  "https://bc.benesse.ne.jp/nzm/redirect?code=FsUPBNRukK":{
    img:"https://cdn2.scratch.mit.edu/get_image/project/1264832201_100x80.png",
    number:"002"
  },
  "https://maps.app.goo.gl/Fp1J9vefnib7n3AaA":{
    img:"https://cdn2.scratch.mit.edu/get_image/project/1261979082_100x80.png",
    number:"003"
  }
};

let stamps=JSON.parse(localStorage.getItem("stamps")||"[]");

/* ===== æ—¥ä»˜ ===== */
function today(){
  const d=new Date();
  return `${d.getFullYear()}/${d.getMonth()+1}/${d.getDate()}`;
}
function todayKey(){
  return new Date().toISOString().slice(0,10);
}

/* ===== è¡¨ç¤º ===== */
function render(){
  const area=document.getElementById("stampArea");
  area.innerHTML="";
  document.getElementById("stampCount").textContent=
    "åˆè¨ˆã‚¹ã‚¿ãƒ³ãƒ—æ•°: "+stamps.filter(s=>!s.used).length;

  stamps.forEach(s=>{
    if(s.used)return;
    area.innerHTML+=`
      <div class="stamp">
        <img src="${s.img}">
        <div>No.${s.number}</div>
        <div>${s.date}</div>
      </div>`;
  });
}

/* ===== QRèª­ã¿å–ã‚Š ===== */
let scanner;
function onScanSuccess(text){
  const info=QR_VALUE_INFO_MAP[text];
  if(!info){alert("ç™»éŒ²ã•ã‚Œã¦ã„ãªã„QRã§ã™");return;}

  stamps.push({
    img:info.img,
    number:info.number,
    date:today(),
    used:false
  });

  localStorage.setItem("stamps",JSON.stringify(stamps));
  render();
}

function restartScan(){
  scanner.clear();
  scanner.render(onScanSuccess);
}

/* ===== ã˜ã‚ƒã‚“ã‘ã‚“ï¼ˆå®Œå…¨1æ—¥1å›ï¼‰ ===== */
const HANDS=["rock","scissors","paper"];
const EMOJI={rock:"âœŠ",scissors:"âœŒï¸",paper:"âœ‹"};

function startJanken(player){
  if(!isAdmin && localStorage.getItem("jankenDate")===todayKey()){
    alert("ä»Šæ—¥ã¯ã‚‚ã†ã˜ã‚ƒã‚“ã‘ã‚“ã§ãã¾ã›ã‚“");
    return;
  }

  let i=0;
  const timer=setInterval(()=>{
    document.getElementById("roulette").textContent=EMOJI[HANDS[i++%3]];
  },100);

  setTimeout(()=>{
    clearInterval(timer);
    const cpu=HANDS[Math.floor(Math.random()*3)];
    document.getElementById("roulette").textContent=EMOJI[cpu];

    let result="ã‚ã„ã“";
    if(player!==cpu){
      if(
        (player==="rock"&&cpu==="scissors")||
        (player==="scissors"&&cpu==="paper")||
        (player==="paper"&&cpu==="rock")
      ) result="å‹ã¡ ğŸ‰";
      else result="è² ã‘ ğŸ˜¢";
    }

    document.getElementById("jankenResult").textContent="çµæœï¼š"+result;

    // â˜… çµæœã«é–¢ä¿‚ãªã1æ—¥1å›
    if(!isAdmin){
      localStorage.setItem("jankenDate",todayKey());
    }
  },2000);
}

/* ===== èµ·å‹• ===== */
scanner=new Html5QrcodeScanner("reader",{fps:8,qrbox:250});
scanner.render(onScanSuccess);
render();
</script>

</body>
</html>

